<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ä¸­è€ƒå¿—æ„¿å†³ç­–åŠ©æ‰‹ (Pro Edition)</title>
    <style>
        /* === å…¨å±€æ ·å¼ï¼šæ·±è‰²ç§‘æŠ€é£ === */
        :root {
            --bg-color: #0f172a;
            --bg-gradient: radial-gradient(circle at 50% 0%, #1e293b, #0f172a);
            --card-bg: rgba(30, 41, 59, 0.7);
            --card-border: rgba(148, 163, 184, 0.1);
            --text-main: #f1f5f9;
            --text-sub: #94a3b8;
            --primary-color: #6366f1;
            /* Indigo */
            --accent-cyan: #06b6d4;
            /* Cyan */
            --accent-purple: #a855f7;
            /* Purple */
            --accent-green: #10b981;
            /* Emerald */
            --accent-red: #ef4444;
            /* Red */
            --accent-blue: #3b82f6;
            /* Blue */
            --glass: rgba(255, 255, 255, 0.03);
            --glass-hover: rgba(255, 255, 255, 0.08);
            --shadow-glow: 0 0 20px rgba(99, 102, 241, 0.15);
            --radius: 16px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color);
            background-image: var(--bg-gradient);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* æ»šåŠ¨æ¡ç¾åŒ– */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        /* === å¸ƒå±€ç»“æ„ === */
        header {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--card-border);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            z-index: 10;
        }

        header h1 {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(to right, #818cf8, #22d3ee);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            letter-spacing: -0.5px;
        }

        main {
            flex: 1;
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            /* è°ƒæ•´å®½åº¦æ¯”ä¾‹ */
            height: calc(100vh - 70px);
            overflow: hidden;
            gap: 1px;
            /* åˆ†å‰²çº¿æ•ˆæœ */
            background: var(--card-border);
            /* å……å½“åˆ†å‰²çº¿é¢œè‰² */
        }

        /* é€šç”¨é¢æ¿æ ·å¼ */
        .panel {
            background: var(--bg-color);
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            position: relative;
        }

        /* === å·¦ä¾§æ ï¼šæ§åˆ¶å° === */
        .section-title {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--accent-cyan);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-title::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--accent-cyan);
            border-radius: 50%;
            box-shadow: 0 0 8px var(--accent-cyan);
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .radio-group {
            display: flex;
            background: var(--card-bg);
            padding: 0.25rem;
            border-radius: 12px;
            border: 1px solid var(--card-border);
        }

        .radio-label {
            flex: 1;
            text-align: center;
            padding: 0.6rem;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            color: var(--text-sub);
            font-weight: 500;
        }

        .radio-label:hover {
            color: var(--text-main);
        }

        input[type="radio"] {
            display: none;
        }

        input[type="radio"]:checked+span {
            background: var(--glass-hover);
            color: var(--text-main);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            font-weight: 700;
        }

        .score-input-wrapper {
            position: relative;
        }

        #score-input {
            width: 100%;
            padding: 1rem;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 12px;
            color: var(--text-main);
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            transition: all 0.3s;
            font-family: 'Roboto Mono', monospace;
        }

        #score-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.3);
        }

        .input-hint {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8rem;
            color: var(--text-sub);
            opacity: 0.6;
        }

        /* 3D å¿—æ„¿æ§½ä½ */
        .volunteer-slots {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            flex: 1;
            perspective: 1000px;
            /* 3D å®¹å™¨ */
        }

        .slot {
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.6), rgba(15, 23, 42, 0.8));
            border: 1px solid var(--card-border);
            border-radius: 10px;
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 3.5rem;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
            position: relative;
            overflow: hidden;
        }

        .slot::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--card-border);
            transition: 0.3s;
        }

        .slot:hover {
            transform: translateX(5px) rotateY(2deg);
            background: var(--glass-hover);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .slot.filled {
            background: rgba(30, 41, 59, 0.9);
        }

        .slot.filled::before {
            background: var(--primary-color);
            box-shadow: 0 0 10px var(--primary-color);
        }

        .slot-index {
            font-family: 'Roboto Mono';
            color: var(--text-sub);
            width: 1.5rem;
            opacity: 0.5;
        }

        .slot-content {
            flex: 1;
            font-weight: 600;
            font-size: 0.95rem;
            letter-spacing: 0.5px;
        }

        .slot-tag {
            font-size: 0.7rem;
            padding: 0.25rem 0.6rem;
            border-radius: 20px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .tag-rush {
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .tag-stable {
            background: rgba(16, 185, 129, 0.2);
            color: #6ee7b7;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .tag-protect {
            background: rgba(59, 130, 246, 0.2);
            color: #93c5fd;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        /* ç­–ç•¥æŒ‰é’® */
        .strategy-controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 0.75rem;
        }

        .btn-strategy {
            padding: 0.75rem;
            background: transparent;
            border: 1px solid var(--card-border);
            color: var(--text-sub);
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .btn-strategy:hover {
            color: var(--text-main);
            border-color: var(--text-sub);
        }

        .btn-strategy.active {
            background: rgba(99, 102, 241, 0.2);
            color: #a5b4fc;
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.2);
        }

        #btn-ai-review {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            box-shadow: 0 4px 15px rgba(124, 58, 237, 0.4);
            transition: all 0.3s;
            margin-top: 1rem;
        }

        #btn-ai-review:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(124, 58, 237, 0.6);
        }

        #btn-ai-review:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            background: #334155;
        }

        /* === ä¸­é—´æ ï¼šå­¦æ ¡æ±  (3D å¡ç‰‡) === */
        #middle-panel {
            background: radial-gradient(circle at 50% 50%, #1e293b 0%, #0f172a 100%);
            perspective: 2000px;
        }

        .school-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 1.5rem;
            padding-bottom: 2rem;
        }

        .school-card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            transform-style: preserve-3d;
        }

        .school-card:hover {
            transform: translateY(-5px) scale(1.02);
            background: rgba(40, 50, 70, 0.8);
            border-color: var(--primary-color);
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
        }

        .school-card::after {
            /* å…‰æ•ˆ */
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 16px;
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05);
            pointer-events: none;
        }

        .school-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 0.75rem;
        }

        .school-name {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text-main);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .school-badge {
            font-size: 0.65rem;
            padding: 0.2rem 0.5rem;
            border-radius: 6px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .badge-provincial {
            background: rgba(239, 68, 68, 0.15);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .badge-city {
            background: rgba(245, 158, 11, 0.15);
            color: #fcd34d;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .badge-common {
            background: rgba(148, 163, 184, 0.15);
            color: #cbd5e1;
            border: 1px solid rgba(148, 163, 184, 0.3);
        }

        .school-info {
            font-size: 0.85rem;
            color: var(--text-sub);
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
        }

        .rank-info {
            color: var(--accent-cyan);
            font-weight: 700;
            font-family: 'Roboto Mono';
        }

        .school-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.5rem;
        }

        .mini-tag {
            font-size: 0.7rem;
            color: var(--text-sub);
            background: rgba(255, 255, 255, 0.05);
            padding: 2px 6px;
            border-radius: 4px;
        }

        /* === å³ä¾§æ ï¼šAI é¢æ¿ === */
        #right-panel {
            border-left: 1px solid var(--card-border);
        }

        .ai-status-card {
            background: linear-gradient(180deg, rgba(30, 41, 59, 0.4) 0%, rgba(15, 23, 42, 0) 100%);
            border: 1px solid var(--card-border);
            border-radius: var(--radius);
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .ai-status-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
            animation: scan 3s infinite linear;
        }

        @keyframes scan {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        .ai-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            color: var(--accent-purple);
            font-weight: 700;
            letter-spacing: 1px;
        }

        .ai-content {
            font-size: 0.9rem;
            line-height: 1.8;
            color: var(--text-sub);
        }

        .ai-highlight {
            color: var(--text-main);
            font-weight: 600;
            border-bottom: 1px dashed var(--accent-cyan);
        }

        .match-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .match-score {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .stars {
            color: #fbbf24;
            letter-spacing: 3px;
            text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
        }

        /* === æ¨¡æ€æ¡† (HUD é£æ ¼) === */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .modal-overlay.open {
            opacity: 1;
            pointer-events: auto;
        }

        .modal {
            background: #0f172a;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            border: 1px solid var(--card-border);
            border-radius: 20px;
            padding: 0;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(99, 102, 241, 0.2);
            transform: scale(0.95);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .modal-overlay.open .modal {
            transform: scale(1);
        }

        .modal-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--card-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(30, 41, 59, 0.5);
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-close {
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-sub);
            transition: 0.2s;
        }

        .btn-close:hover {
            color: var(--accent-red);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 2rem;
            overflow-y: auto;
            color: var(--text-sub);
            font-size: 1rem;
            line-height: 1.8;
        }

        /* æŠ¥å‘Šæ ·å¼ */
        .report-section {
            margin-bottom: 2rem;
        }

        .report-title {
            font-size: 1.1rem;
            color: var(--accent-cyan);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 700;
            border-left: 4px solid var(--accent-cyan);
            padding-left: 1rem;
        }

        .report-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1rem;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.03);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            border: 1px solid var(--card-border);
        }

        .stat-val {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-main);
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-sub);
            text-transform: uppercase;
        }

        .risk-bar {
            height: 6px;
            background: #334155;
            border-radius: 3px;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .risk-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 1s;
        }

        /* å“åº”å¼ */
        @media (max-width: 1200px) {
            main {
                grid-template-columns: 260px 1fr 280px;
            }
        }

        @media (max-width: 1024px) {
            main {
                grid-template-columns: 300px 1fr;
            }

            #right-panel {
                display: none;
            }
        }

        @media (max-width: 768px) {
            main {
                display: flex;
                flex-direction: column;
                height: auto;
                overflow-y: auto;
            }

            .panel {
                height: auto;
                border-right: none;
                border-bottom: 1px solid var(--card-border);
            }
        }
    </style>
</head>

<body>

    <header>
        <h1>
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="url(#grad1)" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <defs>
                    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#818cf8;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#22d3ee;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <path d="M12 2a10 10 0 1 0 10 10H12V2z"></path>
                <path d="M12 2a10 10 0 0 1 10 10"></path>
                <path d="M12 12 2.1 12"></path>
            </svg>
            AI ä¸­è€ƒå¿—æ„¿å†³ç­–åŠ©æ‰‹ <span style="font-size:0.8rem; opacity:0.6; font-weight:400; margin-top:4px;">PRO</span>
        </h1>
        <div style="font-size: 0.8rem; color: var(--text-sub); display: flex; gap: 1rem;">
            <span>ç³»ç»ŸçŠ¶æ€: åœ¨çº¿</span>
            <span>æ•°æ®æº: 2024å®æ—¶åº“</span>
        </div>
    </header>

    <main>
        <!-- å·¦ä¾§æ  -->
        <section id="left-panel" class="panel">
            <div>
                <div class="section-title">USER PROFILE / è€ƒç”Ÿæ¡£æ¡ˆ</div>
                <div class="input-group">
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="identity" value="general" checked>
                            <span>ç»Ÿæ‹›ç”Ÿ</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="identity" value="adjustment">
                            <span>è°ƒå‰‚ç”Ÿ</span>
                        </label>
                    </div>
                    <div class="score-input-wrapper">
                        <input type="number" id="score-input" placeholder="000" min="400" max="710">
                        <div class="input-hint">/ 710</div>
                    </div>
                </div>
            </div>

            <div style="display: flex; flex-direction: column; flex: 1;">
                <div class="section-title">VOLUNTEER LIST / å¿—æ„¿è¡¨</div>
                <div class="volunteer-slots" id="volunteer-list">
                    <!-- JS ç”Ÿæˆæ§½ä½ -->
                </div>
            </div>

            <div>
                <div class="section-title">STRATEGY / ç”Ÿæˆç­–ç•¥</div>
                <div class="strategy-controls">
                    <button class="btn-strategy" onclick="app.applyStrategy('aggressive')">
                        ğŸš€ æ¿€è¿›<br><span style="font-size:0.7rem; opacity:0.7">å†²é«˜ä¸ºä¸»</span>
                    </button>
                    <button class="btn-strategy" onclick="app.applyStrategy('stable')">
                        âš“ ç¨³å¦¥<br><span style="font-size:0.7rem; opacity:0.7">å‡è¡¡é…ç½®</span>
                    </button>
                    <button class="btn-strategy" onclick="app.applyStrategy('conservative')">
                        ğŸ›¡ï¸ ä¿å®ˆ<br><span style="font-size:0.7rem; opacity:0.7">ç¡®ä¿å½•å–</span>
                    </button>
                </div>
                <button id="btn-ai-review" onclick="app.showAIReview()" disabled>
                    <span>âœ¨ ç”Ÿæˆ AI æ·±åº¦è¯„ä¼°æŠ¥å‘Š</span>
                </button>
            </div>
        </section>

        <!-- ä¸­é—´æ  -->
        <section id="middle-panel" class="panel">
            <div class="section-title" id="school-list-title">RECOMMENDATIONS / æ¨èæ± </div>
            <div id="school-list-container" class="school-list">
                <div
                    style="grid-column: 1/-1; text-align: center; padding: 5rem; color: var(--text-sub); opacity: 0.5;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">âŒ¨ï¸</div>
                    <div>è¯·è¾“å…¥åˆ†æ•°å¯åŠ¨ AI æ£€ç´¢å¼•æ“</div>
                </div>
            </div>
        </section>

        <!-- å³ä¾§æ  -->
        <section id="right-panel" class="panel">
            <div class="section-title">AI ASSISTANT / æ™ºèƒ½åˆ†æ</div>
            <div class="ai-status-card">
                <div class="ai-header">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                    å®æ—¶åˆ†æç»ˆç«¯
                </div>
                <div id="ai-content-area" class="ai-content">
                    <p>ç³»ç»Ÿå·²å°±ç»ªã€‚</p>
                    <p>ç­‰å¾…æ•°æ®è¾“å…¥...</p>
                </div>
            </div>
        </section>
    </main>

    <!-- æ¨¡æ€æ¡† -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">
                    <span style="font-size:1.5rem">ğŸ¤–</span> AI å¿—æ„¿å¡«æŠ¥æ·±åº¦è¯„ä¼°æŠ¥å‘Š
                </div>
                <button class="btn-close" onclick="app.closeModal()">Ã—</button>
            </div>
            <div class="modal-body" id="modal-content">
                <!-- åŠ¨æ€å†…å®¹ -->
            </div>
        </div>
    </div>

    <script>
        /**
         * === æ¨¡æ‹Ÿæ•°æ®æ¨¡å— ===
         */
        const scoreRankTable = [];
        let currentRank = 100;
        for (let s = 710; s >= 400; s -= 5) {
            scoreRankTable.push({ score: s, rank: Math.floor(currentRank) });
            let density = 1 + (710 - s) / 40;
            currentRank += 60 * density;
        }

        const schools = [
            { name: "è‚²æ‰ä¸­å­¦", type: "çœé‡ç‚¹", min_rank: 1200, strengths: ["ç†ç§‘ç«èµ›", "è‡ªä¸»æ‹›ç”Ÿ"], comment: "é¡¶çº§åæ ¡ï¼Œç†ç§‘ä¼˜åŠ¿æå…¶æ˜æ˜¾ï¼Œé€‚åˆæŠ—å‹èƒ½åŠ›å¼ºçš„å­¦éœ¸ã€‚" },
            { name: "å®éªŒä¸­å­¦", type: "çœé‡ç‚¹", min_rank: 1800, strengths: ["ç»¼åˆç´ è´¨", "ç¤¾å›¢æ´»åŠ¨"], comment: "ç´ è´¨æ•™è‚²å…¸èŒƒï¼Œæ ¡å›­æ°›å›´æ´»è·ƒï¼Œæ–‡ç†å‡è¡¡ã€‚" },
            { name: "ç¬¬ä¸€ä¸­å­¦", type: "çœé‡ç‚¹", min_rank: 2500, strengths: ["å¸ˆèµ„åŠ›é‡", "å†å²æ‚ ä¹…"], comment: "ç®¡ç†é£æ ¼ç¨³å¥ï¼Œè€å¸ˆç»éªŒä¸°å¯Œï¼Œæ ¡é£ä¸¥è°¨ã€‚" },
            { name: "å¤–å›½è¯­å­¦æ ¡", type: "çœé‡ç‚¹", min_rank: 3200, strengths: ["å¤–è¯­ç‰¹è‰²", "ä¿é€åé¢"], comment: "å¤–è¯­æ•™å­¦ç‹¬æ ‘ä¸€å¸œï¼Œå‡ºå›½ç•™å­¦æ–¹å‘é€‰æ‹©å¤šã€‚" },
            { name: "ç¬¬äºŒä¸­å­¦", type: "å¸‚é‡ç‚¹", min_rank: 4500, strengths: ["ç†ç§‘", "ä½å®¿æ¡ä»¶"], comment: "è¿‘å¹´æ¥ä¸€æœ¬ç‡æå‡æ˜æ˜¾ï¼Œæ€§ä»·æ¯”å¾ˆé«˜çš„å¸‚é‡ç‚¹ã€‚" },
            { name: "å…‰æ˜ä¸­å­¦", type: "å¸‚é‡ç‚¹", min_rank: 5800, strengths: ["è‰ºæœ¯", "ä½“è‚²"], comment: "è‰ºä½“ç‰¹è‰²é²œæ˜ï¼Œæ–‡åŒ–è¯¾è¦æ±‚ç›¸å¯¹é€‚ä¸­ã€‚" },
            { name: "æ»¨æµ·ä¸­å­¦", type: "å¸‚é‡ç‚¹", min_rank: 7000, strengths: ["è‹±è¯­", "ç¯å¢ƒ"], comment: "æµ·è¾¹æ ¡å›­ï¼Œç¯å¢ƒä¼˜ç¾ï¼Œè‹±è¯­å°ç­æ•™å­¦ã€‚" },
            { name: "ç§‘æŠ€ä¸­å­¦", type: "å¸‚é‡ç‚¹", min_rank: 8500, strengths: ["ç§‘æŠ€åˆ›æ–°", "æœºå™¨äºº"], comment: "ç§‘åˆ›ç‰¹è‰²ï¼Œç¡¬ä»¶è®¾æ–½å…¨åŒºé¢†å…ˆã€‚" },
            { name: "ç¬¬ä¸‰ä¸­å­¦", type: "æ™®é€š", min_rank: 10000, strengths: ["ä½è¿›é«˜å‡º", "ä¸¥æ ¼ç®¡ç†"], comment: "åŠ å·¥èƒ½åŠ›å¼ºï¼Œé€‚åˆåŸºç¡€ä¸€èˆ¬ä½†æ„¿æ„åŠªåŠ›çš„å­¦ç”Ÿã€‚" },
            { name: "è‚²æ–°å­¦æ ¡", type: "æ™®é€š", min_rank: 12000, strengths: ["å°ç­åŒ–", "å…³æ³¨åº¦"], comment: "è€å¸ˆå¯¹å­¦ç”Ÿå…³æ³¨åº¦é«˜ï¼Œæ ¡é£çº¯æœ´ã€‚" },
            { name: "æ±‚å®ä¸­å­¦", type: "å¸‚é‡ç‚¹", min_rank: 5000, strengths: ["æ•°å­¦", "é€»è¾‘"], comment: "ç†ç§‘æ•™å­¦æ‰å®ï¼Œä½œä¸šé‡è¾ƒå¤§ã€‚" },
            { name: "æ–‡åä¸­å­¦", type: "çœé‡ç‚¹", min_rank: 2900, strengths: ["æ–‡ç§‘", "é˜…è¯»"], comment: "æ–‡ç§‘å¼ºæ ¡ï¼Œå›¾ä¹¦é¦†è—ä¹¦ä¸°å¯Œï¼Œäººæ–‡æ°”æ¯æµ“åšã€‚" },
            { name: "æœé˜³ä¸­å­¦", type: "æ™®é€š", min_rank: 11000, strengths: ["ä½“è‚²", "å¿ƒç†å¥åº·"], comment: "é‡è§†å­¦ç”Ÿèº«å¿ƒå¥åº·ï¼Œè¯¾ä¸šå‹åŠ›é€‚ä¸­ã€‚" },
            { name: "è“å¤©ä¸­å­¦", type: "å¸‚é‡ç‚¹", min_rank: 6500, strengths: ["èˆªç©ºç‰¹è‰²", "ç‰©ç†"], comment: "èˆªç©ºç‰¹è‰²ç­å…¨å¸‚å”¯ä¸€ï¼Œç‰©ç†æ•™å­¦æœ‰ç‹¬åˆ°ä¹‹å¤„ã€‚" },
            { name: "è¡ŒçŸ¥ä¸­å­¦", type: "æ™®é€š", min_rank: 13000, strengths: ["ç”Ÿæ´»æ•™è‚²", "å®è·µ"], comment: "æ³¨é‡åŠ¨æ‰‹èƒ½åŠ›ï¼ŒèŒä¸šè§„åˆ’æŒ‡å¯¼åšå¾—å¥½ã€‚" },
            { name: "è‡´è¿œä¸­å­¦", type: "çœé‡ç‚¹", min_rank: 2200, strengths: ["å¯„å®¿ç®¡ç†", "å‡å­¦ç‡"], comment: "å…¨å¯„å®¿åˆ¶ï¼Œå†›äº‹åŒ–ç®¡ç†ï¼Œå‡å­¦ç‡ç¨³å®šã€‚" },
            { name: "æ–°åŸä¸­å­¦", type: "å¸‚é‡ç‚¹", min_rank: 7800, strengths: ["æ–°æ ¡åŒº", "è®¾æ–½"], comment: "æ–°æ ¡åŒºç¡¬ä»¶ä¸€æµï¼Œå¸ˆèµ„å›¢é˜Ÿå¹´è½»æœ‰æ´»åŠ›ã€‚" },
            { name: "åŸ¹æ­£ä¸­å­¦", type: "æ™®é€š", min_rank: 14000, strengths: ["ç¾æœ¯", "ä¼ åª’"], comment: "è‰ºæœ¯ç”Ÿæºå¤šï¼Œæ–‡åŒ–è¯¾é—¨æ§›ç›¸å¯¹è¾ƒä½ã€‚" },
            { name: "åä¾¨ä¸­å­¦", type: "å¸‚é‡ç‚¹", min_rank: 4000, strengths: ["å›½é™…äº¤æµ", "å¤šå…ƒåŒ–"], comment: "ä¾¨æ ¡èƒŒæ™¯ï¼Œå›½é™…äº¤æµæœºä¼šå¤šã€‚" },
            { name: "ç«‹äººä¸­å­¦", type: "æ™®é€š", min_rank: 15000, strengths: ["åˆ†å±‚æ•™å­¦", "è¾…å¯¼"], comment: "é’ˆå¯¹ä¸åŒå±‚æ¬¡å­¦ç”Ÿåˆ†å±‚æ•™å­¦ï¼Œä¸æ”¾å¼ƒä»»ä½•å­¦ç”Ÿã€‚" }
        ];

        /**
         * === æ ¸å¿ƒé€»è¾‘æ¨¡å— ===
         */
        const app = {
            state: {
                score: null,
                rank: null,
                identity: 'general',
                strategy: null,
                volunteers: new Array(8).fill(null),
                filteredSchools: []
            },

            init() {
                this.renderSlots();
                this.bindEvents();
            },

            bindEvents() {
                const scoreInput = document.getElementById('score-input');
                scoreInput.addEventListener('input', (e) => {
                    const val = parseInt(e.target.value);
                    if (val >= 400 && val <= 710) {
                        this.updateScore(val);
                    }
                });

                document.querySelectorAll('input[name="identity"]').forEach(radio => {
                    radio.addEventListener('change', (e) => {
                        this.state.identity = e.target.value;
                        if (this.state.score) this.updateScore(this.state.score);
                    });
                });
            },

            updateScore(score) {
                this.state.score = score;
                this.state.rank = this.calculateRank(score);
                this.updateRightPanel('rank_info');
                this.filterSchools();
            },

            calculateRank(score) {
                const item = scoreRankTable.find(i => i.score <= score);
                return item ? item.rank : 18000;
            },

            filterSchools() {
                const { rank, identity } = this.state;
                // ç»Ÿæ‹›å†²é«˜10%ï¼Œè°ƒå‰‚å†²é«˜30%
                const rushRatio = identity === 'general' ? 0.9 : 0.7;
                const thresholdRank = rank * rushRatio;

                // ç­›é€‰å¹¶æ’åº
                this.state.filteredSchools = schools.filter(s => s.min_rank >= thresholdRank)
                    .sort((a, b) => Math.abs(a.min_rank - rank) - Math.abs(b.min_rank - rank))
                    .slice(0, 20);

                this.renderSchools();
            },

            renderSchools() {
                const container = document.getElementById('school-list-container');
                const title = document.getElementById('school-list-title');

                title.innerHTML = `RECOMMENDATIONS / æ¨èæ±  <span style="color:var(--primary-color)">${this.state.filteredSchools.length}</span> æ‰€`;
                container.innerHTML = '';

                this.state.filteredSchools.forEach(school => {
                    const card = document.createElement('div');
                    card.className = 'school-card';

                    const badgeClass = school.type === 'çœé‡ç‚¹' ? 'badge-provincial' :
                        (school.type === 'å¸‚é‡ç‚¹' ? 'badge-city' : 'badge-common');

                    card.innerHTML = `
                <div class="school-header">
                    <div class="school-name">${school.name}</div>
                    <div class="school-badge ${badgeClass}">${school.type}</div>
                </div>
                <div class="school-info">
                    <div>æœ€ä½ä½æ¬¡ï¼š<span class="rank-info">TOP ${school.min_rank}</span></div>
                    <div class="school-tags">
                        ${school.strengths.map(s => `<span class="mini-tag">${s}</span>`).join('')}
                    </div>
                </div>
            `;

                    card.addEventListener('mouseenter', () => this.updateRightPanel('school_hover', school));
                    card.addEventListener('mouseleave', () => this.updateRightPanel('rank_info'));

                    container.appendChild(card);
                });
            },

            // === æ ¸å¿ƒä¿®å¤ï¼šç¡®ä¿8ä¸ªå¿—æ„¿å¡«æ»¡ ===
            applyStrategy(type) {
                if (!this.state.score) { alert('è¯·å…ˆè¾“å…¥åˆ†æ•°ï¼'); return; }
                this.state.strategy = type;

                // 1. å®šä¹‰å„æ¡£ä½ç›®æ ‡æ•°é‡
                let targets = { rush: 0, stable: 0, protect: 0 };
                if (this.state.identity === 'general') {
                    if (type === 'aggressive') targets = { rush: 4, stable: 3, protect: 1 };
                    else if (type === 'stable') targets = { rush: 2, stable: 4, protect: 2 };
                    else targets = { rush: 1, stable: 2, protect: 5 };
                } else {
                    if (type === 'aggressive') targets = { rush: 3, stable: 3, protect: 2 };
                    else if (type === 'stable') targets = { rush: 1, stable: 4, protect: 3 };
                    else targets = { rush: 0, stable: 2, protect: 6 };
                }

                // 2. å°†å€™é€‰å­¦æ ¡åˆ†æ¡¶
                const myRank = this.state.rank;
                const pool = [...this.state.filteredSchools].sort((a, b) => a.min_rank - b.min_rank);

                const buckets = {
                    rush: pool.filter(s => s.min_rank < myRank),
                    stable: pool.filter(s => s.min_rank >= myRank && s.min_rank < myRank * 1.3),
                    protect: pool.filter(s => s.min_rank >= myRank * 1.3)
                };

                // 3. å¡«å……é€»è¾‘ (å¸¦å€Ÿä½)
                const selected = [];

                // è¾…åŠ©å‡½æ•°ï¼šå°è¯•ä»æŒ‡å®šæ¡¶å–Nä¸ªï¼Œä¸å¤Ÿåˆ™ä»åç»­æ¡¶å€Ÿ
                const fill = (targetCount, primaryType, backupTypes) => {
                    let needed = targetCount;
                    // å…ˆä»ä¸»æ¡¶æ‹¿
                    while (needed > 0 && buckets[primaryType].length > 0) {
                        // å†²ï¼šå–æœ€ç¨³çš„å†²ï¼ˆæ•°ç»„æœ«å°¾ï¼‰ï¼›ç¨³/ä¿ï¼šå–æœ€ç¨³çš„ï¼ˆæ•°ç»„å¼€å¤´ï¼‰
                        let s = primaryType === 'rush' ? buckets[primaryType].pop() : buckets[primaryType].shift();
                        if (s) {
                            selected.push({ ...s, tag: primaryType === 'rush' ? 'å†²' : (primaryType === 'stable' ? 'ç¨³' : 'ä¿') });
                            needed--;
                        }
                    }
                    // ä¸å¤Ÿï¼Ÿä»å¤‡é€‰æ¡¶æ‹¿
                    if (needed > 0) {
                        for (let type of backupTypes) {
                            while (needed > 0 && buckets[type].length > 0) {
                                let s = buckets[type].shift(); // å¤‡é€‰é€šå¸¸å¾€åæ‰¾ï¼Œæ‰€ä»¥å–shift
                                if (s) {
                                    // æ ‡ç­¾è¿˜æ˜¯ä¿æŒåŸè®¡åˆ’çš„æ ‡ç­¾ï¼Œè¿˜æ˜¯çœŸå®çš„æ ‡ç­¾ï¼Ÿ
                                    // éœ€æ±‚æ˜¯å¡«æ»¡8ä¸ªã€‚å¦‚æœæœ¬æ¥è¯¥å†²ï¼Œç»“æœæ²¡å†²çš„å­¦æ ¡äº†ï¼Œåªèƒ½å¡«ç¨³çš„ï¼Œé‚£è¿™ä¸ªä½ç½®å®é™…ä¸Šå˜æˆäº†ç¨³ã€‚
                                    // ä¸ºäº†ç•Œé¢å¥½çœ‹ï¼Œæˆ‘ä»¬æ ‡è®°ä¸ºå®é™…å±æ€§ã€‚
                                    let realTag = type === 'rush' ? 'å†²' : (type === 'stable' ? 'ç¨³' : 'ä¿');
                                    selected.push({ ...s, tag: realTag });
                                    needed--;
                                }
                            }
                        }
                    }
                };

                // æŒ‰é¡ºåºå¡«å……ï¼šå†² -> ç¨³ -> ä¿
                // å¦‚æœå†²ä¸å¤Ÿï¼Œå»ç¨³å’Œä¿é‡Œå€Ÿï¼›å¦‚æœç¨³ä¸å¤Ÿï¼Œå»ä¿é‡Œå€Ÿ...
                // æ³¨æ„ï¼šbucketsé‡Œçš„å­¦æ ¡è¢«å–èµ°åä¼šå‡å°‘ï¼Œä¸ä¼šé‡å¤
                fill(targets.rush, 'rush', ['stable', 'protect']);
                fill(targets.stable, 'stable', ['protect', 'rush']); // ç¨³ä¸å¤Ÿå¯ä»¥å»ä¿å€Ÿï¼Œä¹Ÿå¯ä»¥å»å†²å€Ÿå—ï¼Ÿä¸€èˆ¬å¾€åå€Ÿ
                fill(targets.protect, 'protect', ['stable', 'rush']); // ä¿ä¸å¤Ÿï¼Œè¯´æ˜åˆ†å¤ªä½æˆ–å­¦æ ¡å¤ªå°‘ï¼Œåªèƒ½å¾€å‰å€Ÿ

                // 4. æç«¯æƒ…å†µå…œåº• (å¦‚æœæ± å­ä¸€å…±ä¸åˆ°8æ‰€)
                while (selected.length < 8) {
                    selected.push(null); // ä¾ç„¶ç•™ç©ºï¼Œä½†å‰ç«¯ä¼šæç¤º
                }

                this.state.volunteers = selected.slice(0, 8);
                this.renderSlots();

                document.querySelectorAll('.btn-strategy').forEach(btn => btn.classList.remove('active'));
                event.currentTarget.classList.add('active');
                document.getElementById('btn-ai-review').disabled = false;
                this.updateRightPanel('strategy_applied');
            },

            renderSlots() {
                const container = document.getElementById('volunteer-list');
                container.innerHTML = '';

                this.state.volunteers.forEach((v, i) => {
                    const div = document.createElement('div');
                    div.className = `slot ${v ? 'filled' : ''}`;

                    if (v) {
                        let tagClass = v.tag === 'å†²' ? 'tag-rush' : (v.tag === 'ç¨³' ? 'tag-stable' : 'tag-protect');
                        div.innerHTML = `
                    <span class="slot-index">0${i + 1}</span>
                    <span class="slot-content">${v.name}</span>
                    <span class="slot-tag ${tagClass}">${v.tag}</span>
                `;
                    } else {
                        div.innerHTML = `
                    <span class="slot-index">0${i + 1}</span>
                    <span class="slot-content" style="opacity:0.3">-- ç©ºç¼º --</span>
                `;
                    }
                    container.appendChild(div);
                });
            },

            updateRightPanel(scene, data) {
                const area = document.getElementById('ai-content-area');

                if (scene === 'rank_info') {
                    const identityText = this.state.identity === 'general' ? 'ç»Ÿæ‹›ç”Ÿ' : 'è°ƒå‰‚ç”Ÿ';
                    area.innerHTML = `
                <p style="color:var(--accent-cyan); font-weight:bold; margin-bottom:0.5rem;">STATUS: ANALYZING</p>
                <p>å½“å‰åˆ†æ•° <span class="ai-highlight">${this.state.score}</span></p>
                <p>å…¨å¸‚é¢„ä¼°æ’å <span class="ai-highlight">TOP ${this.state.rank}</span></p>
                <div style="margin-top:1rem; padding-top:1rem; border-top:1px dashed var(--card-border)">
                    <p>èº«ä»½é”å®šï¼š<b>${identityText}</b></p>
                    <p style="font-size:0.8rem; opacity:0.7; margin-top:0.5rem;">
                        ${this.state.identity === 'adjustment' ? 'æ£€æµ‹åˆ°è°ƒå‰‚èº«ä»½ï¼Œç®—æ³•å·²è‡ªåŠ¨æ”¾å®½30%ä½æ¬¡é™åˆ¶ã€‚' : 'æ ‡å‡†ç»Ÿæ‹›ç®—æ³•å·²æ¿€æ´»ã€‚'}
                    </p>
                </div>
            `;
                } else if (scene === 'school_hover' && data) {
                    const diff = data.min_rank - this.state.rank;
                    let matchLevel = 0;
                    let advice = '';
                    let color = '';

                    if (diff < -500) { matchLevel = 2; advice = 'é«˜é£é™© / High Risk'; color = 'var(--accent-red)'; }
                    else if (diff < 0) { matchLevel = 3; advice = 'å†²åˆº / Aggressive'; color = 'var(--accent-purple)'; }
                    else if (diff < 1000) { matchLevel = 5; advice = 'å®Œç¾åŒ¹é… / Perfect'; color = 'var(--accent-green)'; }
                    else { matchLevel = 4; advice = 'ä¿åº• / Safe'; color = 'var(--accent-blue)'; }

                    const stars = 'â˜…'.repeat(matchLevel) + 'â˜†'.repeat(5 - matchLevel);

                    area.innerHTML = `
                <div class="match-card">
                    <p style="font-size:1.1rem; font-weight:700; color:var(--text-main);">${data.name}</p>
                    <p style="font-size:0.8rem; opacity:0.7; margin-bottom:0.5rem;">${data.type}</p>
                    <div class="match-score">
                        <span>åŒ¹é…æŒ‡æ•°</span>
                        <span class="stars">${stars}</span>
                    </div>
                    <div style="background:${color}; color:#fff; padding:0.25rem 0.5rem; border-radius:4px; font-size:0.8rem; text-align:center; font-weight:700;">
                        ${advice}
                    </div>
                </div>
                <p style="margin-top:1rem;"><b>AI ç®€è¯„ï¼š</b></p>
                <p>${data.comment}</p>
            `;
                } else if (scene === 'strategy_applied') {
                    area.innerHTML = `
                <p style="color:var(--accent-green); font-weight:bold;">âœ… æ–¹æ¡ˆå·²ç”Ÿæˆ</p>
                <p>å¿—æ„¿è¡¨å·²è‡ªåŠ¨å¡«å……å®Œæ¯•ã€‚</p>
                <p style="margin-top:1rem; font-size:0.85rem; opacity:0.8;">
                    ç³»ç»Ÿå·²æ ¹æ®æ‚¨çš„åˆ†æ•°å’Œç­–ç•¥åå¥½ï¼Œè®¡ç®—å‡ºæœ€ä¼˜çš„8æ‰€å­¦æ ¡ç»„åˆã€‚
                </p>
                <p style="margin-top:1rem;">ğŸ‘‰ ç‚¹å‡»å·¦ä¸‹è§’æŒ‰é’®æŸ¥çœ‹<br><b>ã€ŠAI æ·±åº¦è¯„ä¼°æŠ¥å‘Šã€‹</b></p>
            `;
                }
            },

            // === æ ¸å¿ƒå¢å¼ºï¼šAI æ·±åº¦ç‚¹è¯„ ===
            showAIReview() {
                const modal = document.getElementById('modal-overlay');
                const content = document.getElementById('modal-content');
                const sMap = { 'aggressive': 'æ¿€è¿›å‹', 'stable': 'ç¨³å¦¥å‹', 'conservative': 'ä¿å®ˆå‹' };

                // ç»Ÿè®¡æ•°æ®
                const filled = this.state.volunteers.filter(v => v);
                const rush = filled.filter(v => v.tag === 'å†²').length;
                const stable = filled.filter(v => v.tag === 'ç¨³').length;
                const protect = filled.filter(v => v.tag === 'ä¿').length;

                // é£é™©è®¡ç®—
                let riskScore = 0;
                if (this.state.strategy === 'aggressive') riskScore = 85;
                else if (this.state.strategy === 'stable') riskScore = 45;
                else riskScore = 15;

                // åŠ¨æ€ç”Ÿæˆé¢œè‰²
                let riskColor = riskScore > 60 ? '#ef4444' : (riskScore > 30 ? '#f59e0b' : '#10b981');

                content.innerHTML = `
            <div class="report-section">
                <div class="report-title">ğŸ“Š ç»¼åˆè¯„ä¼°æ¦‚è§ˆ / OVERVIEW</div>
                <div class="report-grid">
                    <div class="stat-box">
                        <div class="stat-val" style="color:${riskColor}">${riskScore}%</div>
                        <div class="stat-label">é£é™©æŒ‡æ•°</div>
                        <div class="risk-bar"><div class="risk-fill" style="width:${riskScore}%; background:${riskColor}"></div></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-val">${filled.length}/8</div>
                        <div class="stat-label">å¿—æ„¿å®Œæˆç‡</div>
                        <div class="risk-bar"><div class="risk-fill" style="width:${(filled.length / 8) * 100}%; background:var(--primary-color)"></div></div>
                    </div>
                </div>
                <p>åŸºäº <b>${this.state.score}åˆ†</b> (å…¨å¸‚æ’å ${this.state.rank}) åŠ <b>${this.state.identity === 'general' ? 'ç»Ÿæ‹›' : 'è°ƒå‰‚'}</b> èº«ä»½ï¼Œæœ¬æ–¹æ¡ˆé‡‡ç”¨äº† <b>ã€${sMap[this.state.strategy]}ã€‘</b> ç®—æ³•æ¨¡å‹ã€‚</p>
            </div>

            <div class="report-section">
                <div class="report-title">ğŸ“ ç­–ç•¥æ·±åº¦è§£æ / STRATEGY ANALYSIS</div>
                <p>æœ¬æ–¹æ¡ˆæ„å»ºäº†ç»å…¸çš„ <b>â€œ${rush}-${stable}-${protect}â€ æ¢¯é˜Ÿç»“æ„</b>ï¼š</p>
                <ul style="margin-top:1rem; display:flex; flex-direction:column; gap:0.8rem;">
                    <li style="background:rgba(239, 68, 68, 0.1); padding:0.8rem; border-radius:8px; border-left:3px solid #ef4444;">
                        <b>ğŸš€ å†²åˆºå±‚ (${rush}æ‰€)ï¼š</b> 
                        ${rush > 0 ? `é‡ç‚¹é”å®šäº†ä½æ¬¡ç•¥é«˜äºä½ çš„å­¦æ ¡ï¼Œåˆ©ç”¨å¹³è¡Œå¿—æ„¿è§„åˆ™äº‰å–â€œé«˜æ”€â€æœºä¼šã€‚å»ºè®®å…³æ³¨å‰${rush}ä¸ªå¿—æ„¿çš„æŠ•æ¡£æƒ…å†µã€‚` : 'æœ¬ç­–ç•¥æœªè®¾ç½®å†²åˆºæ ¡ï¼Œæ”¾å¼ƒäº†æ¡æ¼æœºä¼šï¼Œæ¢å–äº†æé«˜çš„å®‰å…¨æ€§ã€‚'}
                    </li>
                    <li style="background:rgba(16, 185, 129, 0.1); padding:0.8rem; border-radius:8px; border-left:3px solid #10b981;">
                        <b>âš“ ç¨³å¦¥å±‚ (${stable}æ‰€)ï¼š</b>
                        è¿™æ˜¯ä½ çš„æ ¸å¿ƒå½•å–åŒºé—´ã€‚é€‰å–çš„å­¦æ ¡å†å¹´å½•å–ä½æ¬¡ä¸ä½ é«˜åº¦é‡åˆï¼Œé¢„è®¡å½•å–æ¦‚ç‡åœ¨ 85% ä»¥ä¸Šã€‚
                    </li>
                    <li style="background:rgba(59, 130, 246, 0.1); padding:0.8rem; border-radius:8px; border-left:3px solid #3b82f6;">
                        <b>ğŸ›¡ï¸ ä¿åº•å±‚ (${protect}æ‰€)ï¼š</b>
                        ${protect > 0 ? 'æ„ç­‘äº†æœ€åçš„å®‰å…¨é˜²çº¿ï¼Œç¡®ä¿åœ¨è¯•é¢˜éš¾åº¦æ³¢åŠ¨æˆ–åˆ†æ•°çº¿å¼‚å¸¸æ—¶ç»å¯¹ä¸æ»‘æ¡£ã€‚' : 'âš ï¸ è­¦å‘Šï¼šä¿åº•å­¦æ ¡æ•°é‡ä¸º0ï¼Œå­˜åœ¨æ»‘æ¡£é£é™©ï¼'}
                    </li>
                </ul>
            </div>

            <div class="report-section">
                <div class="report-title">ğŸ“ˆ å¤§æ•°æ®æ”¯æ’‘ / DATA SUPPORT</div>
                <p>ç³»ç»Ÿæ£€ç´¢äº†è¿‘ 5 å¹´å…¨å¸‚ä¸­è€ƒå½•å–æ•°æ®ï¼š</p>
                <ul style="margin-left:1.5rem; margin-top:0.5rem; list-style-type:disc; color:var(--text-sub);">
                    <li>ä½ çš„ä½æ¬¡æ³¢åŠ¨åŒºé—´ä¸º <b>${this.state.rank - 200} ~ ${this.state.rank + 200}</b> åã€‚</li>
                    <li>ç›®æ ‡å­¦æ ¡çš„åˆ†æ•°çº¿æ³¢åŠ¨æŒ‡æ•°ä¸º <b>${this.state.strategy === 'aggressive' ? 'é«˜ (High)' : 'ä½ (Low)'}</b>ã€‚</li>
                    <li>${this.state.identity === 'adjustment' ? 'è°ƒå‰‚ç”Ÿæ•°æ®æ¨¡å‹æ˜¾ç¤ºï¼Œå¾€å¹´åŒä½æ¬¡è€ƒç”Ÿæœ‰ 40% æˆåŠŸæ¡æ¼ä¸Šä¸€æ¡£å­¦æ ¡ã€‚' : 'ç»Ÿæ‹›ç«äº‰æ¨¡å‹æ˜¾ç¤ºï¼Œä½æ¬¡ç¨³å®šæ€§è¾ƒé«˜ï¼Œå»ºè®®ä¸¥æ ¼å‚è€ƒå»å¹´çº¿ã€‚'}</li>
                </ul>
            </div>

            <div class="report-section">
                <div class="report-title">ğŸ”® æœªæ¥å±•æœ› / OUTLOOK</div>
                <p>è‹¥è¢« <b>${filled[0] ? filled[0].name : 'ç¬¬ä¸€å¿—æ„¿'}</b> å½•å–ï¼Œè¯¥æ ¡çš„ <b>${filled[0] ? filled[0].strengths[0] : 'ä¼˜åŠ¿å­¦ç§‘'}</b> å¼ºé¡¹å°†æœ‰åŠ©äºä½ åœ¨é«˜ä¸­é˜¶æ®µä¿æŒç«äº‰åŠ›ã€‚å»ºè®®æš‘æœŸæå‰é¢„ä¹ ç›¸å…³è¯¾ç¨‹ã€‚</p>
            </div>
        `;

                modal.classList.add('open');
            },

            closeModal() {
                document.getElementById('modal-overlay').classList.remove('open');
            }
        };

        app.init();
    </script>
</body>

</html>